<body bgcolor=#66686f>
<script>
var titles = ['Void'];

var TILE_EARTH = parseInt('00001', 2);
var TILE_WATER = parseInt('00010', 2);
var TILE_AIR   = parseInt('00100', 2);
var TILE_FIRE  = parseInt('01000', 2);
var TILE_QUINTESSENCE = parseInt('10000', 2);

titles[TILE_AIR] = 'Air';
titles[TILE_FIRE] = 'Fire';
titles[TILE_EARTH] = 'Earth';
titles[TILE_WATER] = 'Water';

titles[TILE_AIR + TILE_FIRE] = 'Phlogiston';
titles[TILE_AIR + TILE_EARTH] = 'Sand';
titles[TILE_AIR + TILE_WATER] = 'Rain';
titles[TILE_FIRE + TILE_EARTH] = 'Brimstone';
titles[TILE_FIRE + TILE_WATER] = 'Alcohol';
titles[TILE_EARTH + TILE_WATER] = 'Mud';

titles[TILE_AIR + TILE_FIRE + TILE_EARTH] = 'Diamond';
titles[TILE_AIR + TILE_FIRE + TILE_WATER] = 'Lightning';
titles[TILE_AIR + TILE_EARTH + TILE_WATER] = 'Golem';
titles[TILE_FIRE + TILE_EARTH + TILE_WATER] = 'Oil';

titles[TILE_AIR + TILE_FIRE + TILE_EARTH + TILE_WATER] = 'Life';

titles[TILE_QUINTESSENCE] = 'Quintessence';


function createTile(code){
	var a = document.createElement('canvas');
	a.width=80;
	a.height=80;
	var c=a.getContext('2d');
	var imageData=c.createImageData(80,80);
	for (var idx=6400; idx--; ){
		var y = (idx / 80 | 0) - 39.5;
		var x = idx % 80 - 39.5;

		var value = Math.random() * 16 | 160; // 0xA0...0xAF integer
		value -= (x*x*x)/1200;
		value -= (y*y*y)/1200;

		imageData.data[idx*4] = value;
		imageData.data[idx*4+1] = value-=5;
		imageData.data[idx*4+2] = value-=15;
		imageData.data[idx*4+3] = 9000 - (x*x+y*y)*3;
	}
	c.putImageData(imageData, 0, 0);

	c.globalCompositeOperation = 'source-atop';
	for (var drawPosition = 6; --drawPosition;){ // Note the pre-increment. drawPosition is in range 5..1
		c.save();

		c.translate(
			drawPosition & 4 && (5 - drawPosition) * 2 - 1,
			drawPosition & 2 && (3 - drawPosition) * 2 - 1
		);

		c.globalAlpha = drawPosition ^ 1 ? 0.3 : .7;

		c.font = '16px';
		c.textAlign = 'center';
		c.strokeStyle = c.fillStyle = drawPosition & 1 ? '#000' : '#FFF';
		c.fillText(titles[code], 40, 70);

		// Draw icons
		c.beginPath();
		c.lineWidth = 2;
		if (code == 1){ // Earth
			c.moveTo(17, 31);
			c.bezierCurveTo(
				22, 24,
				32, 24,
				32, 31
			);
			c.bezierCurveTo(
				33, 21,
				47, 21,
				49, 31
			);
			c.bezierCurveTo(
				51, 28,
				56, 24,
				63, 31
			);
			c.moveTo(18, 39);
			c.lineTo(62, 39);
			c.moveTo(18, 48);
			c.lineTo(62, 48);
		}
		if (code == 2){ // Water
			c.moveTo(20, 45);
			c.bezierCurveTo(
				40, 60,
				40, 30,
				60, 45
			);
			c.moveTo(20, 35);
			c.bezierCurveTo(
				40, 50,
				40, 20,
				60, 35
			);
			c.moveTo(20, 25);
			c.bezierCurveTo(
				40, 40,
				40, 10,
				60, 25
			);
		}
		if (code == 3) { // Mud
			c.moveTo(26, 40);
			c.bezierCurveTo(
				11, 40,
				16, 55,
				46, 45
			);
			c.bezierCurveTo(
				66, 45,
				66, 40,
				56, 40
			);
			c.moveTo(53, 35);
			c.arc(49, 35, 4, 0, Math.PI * 2, false);
			c.moveTo(40, 30);
			c.arc(33, 30, 7, 0, Math.PI * 2, false)
		}
		if (code == 4) { // Air
			c.moveTo(20, 35);
			c.bezierCurveTo(
				20, 32,
				60, 38,
				60, 35
			);
			c.moveTo(20, 27);
			c.bezierCurveTo(
				60, 27,
				65, 17,
				50, 17
			);
			c.moveTo(20, 43);
			c.bezierCurveTo(
				60, 43,
				65, 53,
				50, 53
			);
		}
		if (code == 5){ // Sand
			c.moveTo(20, 50);

			c.bezierCurveTo(
				35, 10,
				35, 10,
				50, 50
			);

			c.bezierCurveTo(
				50, 50,
				50, 55,
				35, 55
			);

			c.moveTo(50, 35);
			c.bezierCurveTo(
				55, 25,
				65, 50,
				65, 50
			);
		}
		if (code == 6){ // Rain
			c.moveTo(32, 25);
			c.bezierCurveTo(
				20, 20,
				15, 38,
				20, 38
			);
			c.lineTo(60, 38);
			c.bezierCurveTo(
				65, 38,
				63, 8,
				45, 19
			);
			c.moveTo(48, 27);
			c.bezierCurveTo(
				48, 17,
				32, 23,
				32, 30
			);
			c.moveTo(32, 42);
			c.lineTo(28, 51);

			c.moveTo(42, 42);
			c.lineTo(37, 53);

			c.moveTo(52, 42);
			c.lineTo(48, 51);

		}
		if (code == 7) { // Golem
			c.moveTo(20, 55);
			c.bezierCurveTo(
				20, 35,
				25, 40,
				30, 35
			);
			c.bezierCurveTo(
				38, 30,
				25, 20,
				40, 20
			);

			c.bezierCurveTo(
				55, 20,
				42, 30,
				50, 35
			);
			c.bezierCurveTo(
				55, 40,
				60, 35,
				60, 55
			);

			c.moveTo(31, 55);
			c.bezierCurveTo(
				31, 45,
				28, 46,
				27, 46
			);

			c.moveTo(49, 55);
			c.bezierCurveTo(
				49, 45,
				52, 46,
				53, 46
			);
		}
		if (code == 8){ // Fire
			c.moveTo(25, 40);
			c.bezierCurveTo(
				25, 60,
				55, 60,
				55, 40
			);
			c.bezierCurveTo(
				55, 30,
				40, 25,
				40, 15
			);
			c.bezierCurveTo(
				30, 25,
				45, 40,
				40, 40
			);
		}
		if (code == 9){ // Sulfur/Brimstone
			c.moveTo(33, 23);
			c.lineTo(42, 27);
			c.lineTo(45, 58);
			c.lineTo(20, 43);
			c.lineTo(30, 20);
			c.lineTo(42, 14);
			c.lineTo(55, 20);
			c.lineTo(68, 47);
			c.lineTo(50, 55);
		}
		if (code == 10){ // Alcohol
			c.moveTo(32, 17);
			c.bezierCurveTo(
				38, 17,
				37, 17,
				37, 35
			);
			c.bezierCurveTo(
				20, 47,
				15, 52,
				40, 52
			);
			c.bezierCurveTo(
				65, 52,
				60, 47,
				43, 35
			);
			c.bezierCurveTo(
				43, 17,
				42, 17,
				48, 17
			)
		}
		if (code == 11){ // Oil
			c.moveTo(25, 18);
			c.bezierCurveTo(
				25, 10,
				55, 10,
				55, 18
			);
			c.bezierCurveTo(
				55, 26,
				25, 26,
				25, 18
			);
			c.moveTo(55, 48);
			c.bezierCurveTo(
				55, 56,
				25, 56,
				25, 48
			);
			c.moveTo(27, 47);
			c.lineTo(27, 24);
			c.moveTo(53, 47);
			c.lineTo(53, 24);

			c.moveTo(40, 30);
			c.bezierCurveTo(
				30, 50,
				50, 50,
				40, 30
			);
		}

		c.stroke();


		// Draw elelment hints
		if (code & 16){
			c.beginPath();
			c.arc(40, 40, 8, 0, Math.PI * 2, false);
			if (drawPosition == 1){
				c.fillStyle = '#FFF';
			}
			c.fill();
		}

		for (var bit = 4; bit--; ){
			if (code & (1<<bit)){
				c.beginPath();
				c.moveTo(0,0);
				c.lineTo(0,35);
				c.bezierCurveTo(10,35,-4,5,12,12);
				c.bezierCurveTo(5,-4,35,10,35,0);
				if (drawPosition == 1){
					c.fillStyle = ['#0B0', '#00C', '#DD0', '#C00'][bit];
				}
				c.fill();
			}
			c.translate(40, 40);
			c.rotate(Math.PI / 2);
			c.translate(-40, -40);
		}
		c.restore();
	}
	return a;
};


// Demo
for (var i=0; i<32; i++){
	var tile = createTile(i);
	tile.style.float = 'left';
	tile.style.margin = '2px';
	document.body.appendChild(tile);
}


</script>